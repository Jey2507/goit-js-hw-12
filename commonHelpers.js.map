{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/img/error.svg","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\n\nconst KEY = \"42651969-17d73580612059adec8ce0b1d\";\nconst URL = \"https://pixabay.com/api/\";\n\nexport async function fetchImages(query, page, perPage) {\n        const response = await axios.get(`${URL}?key=${KEY}&q=${query}&page=${page}&per_page=${perPage}`);\n        return await response.data;\n\n}\n","export default \"__VITE_ASSET__8479b7dd__\"","import iziToast from \"izitoast\";\nimport Error from \"../img/error.svg\";\n\nexport function showErrorMessage() {\n    iziToast.show({\n        message: \"Sorry, there are no images matching your search query. Please, try again!\",\n        maxWidth: \"340px\",\n        iconUrl: Error,\n        backgroundColor: \"#ef4040\",\n        theme: \"dark\",\n        color: \"#fafafb\",\n        timeout: 3000,\n        position: \"topRight\"\n    });\n}\n\nexport function showEndPictures() {\n    iziToast.show({\n        message: \"We're sorry, but you've reached the end of search results.\",\n        maxWidth: \"340px\",\n        iconUrl: Error,\n        backgroundColor: \"#ef4040\",\n        theme: \"dark\",\n        color: \"#fafafb\",\n        timeout: 3000,\n        position: \"topRight\"\n    });\n}\n\n\nexport function showNoneText() {\n    iziToast.show({\n        message: \"Sorry, you have an empty string\",\n        maxWidth: \"340px\",\n        iconUrl: Error,\n        backgroundColor: \"#ef4040\",\n        theme: \"dark\",\n        color: \"#fafafb\",\n        timeout: 3000,\n        position: \"topRight\"\n    });\n}\n\n\nexport function renderImages(images, arrayImg) {\n    const markup = arrayImg.map(\n            ({webformatURL, largeImageURL, tags, likes, views, comments, downloads}) => {\n        return `<li class=\"li-im\">\n            <a href=\"${largeImageURL}\">\n                <img class=\"image\" src=\"${webformatURL}\" alt=\"${tags}\">\n            </a>\n            <ul class=\"info\">\n                <li class=\"descr\">\n                    <h2 class=\"descr-h\">Likes</h2>\n                    <p class=\"descr-p\">${likes}</p>\n                </li>\n                <li class=\"descr\">\n                    <h2 class=\"descr-h\">Views</h2>\n                    <p class=\"descr-p\">${views}</p>\n                </li>\n                <li class=\"descr\">\n                    <h2 class=\"descr-h\">Comments</h2>\n                    <p class=\"descr-p\">${comments}</p>\n                </li>\n                <li class=\"descr\">\n                    <h2 class=\"descr-h\">Downloads</h2>\n                    <p class=\"descr-p\">${downloads}</p>\n                </li>\n            </ul>\n        </li>`;\n    }).join(\"\");\n\n    images.insertAdjacentHTML(\"beforeend\", markup);\n}\n","import { fetchImages } from \"./js/pixabay-api.js\";\nimport { showErrorMessage, showEndPictures, showNoneText, renderImages } from \"./js/render-functions.js\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst form = document.querySelector(\"form\");\nconst images = document.querySelector(\".list\");\n\n\nconst loader = document.querySelector(\".loader\");\nconst loadMore = document.querySelector(\".load-more\")\n\nconst value = document.querySelector(\"#value\");\n\nlet page;\n\nlet current_query;\n\nconst perPage = 15;\n\n\nfunction showLoad() {\n    loader.style.display = \"block\";\n}\n\nfunction hideLoad() {\n    loader.style.display = \"none\";\n}\n\nfunction simpleRefresh() {\n    new SimpleLightbox('.list li a', {\n        captionDelay: 300,\n        captions: true,\n        captionsData: \"alt\",\n        captionClass: \"color-style\",\n    }).refresh();\n}\n\nform.addEventListener(\"submit\", function(event) {\n    event.preventDefault();\n    showLoad();\n\n    images.innerHTML = \"\";\n    loadMore.style.display = \"none\";\n    \n    const query = value.value.trim();\n\n    if (!query) {\n        showNoneText();\n        hideLoad();\n        return;\n    }\n\n    page = 1;\n\n    fetchImages(query, page, perPage)\n        .then(arrayImg => {\n            if (arrayImg.hits.length === 0) {\n                throw new Error(\"No images found\");\n            }\n\n           renderImages(images, arrayImg.hits);\n           simpleRefresh();\n           loadMore.style.display = \"block\";\n        })\n        .catch(() => {\n            showErrorMessage();\n        })\n        .finally(() => {\n            hideLoad();\n        });\n\n        current_query = query;\n});\n\n\nloadMore.addEventListener(\"click\", (event) => {\n    event.preventDefault();\n    showLoad();\n    page++;\n    fetchImages(current_query, page, perPage)\n        .then(arrayImg => {\n            const totalHits = arrayImg.totalHits;\n            const totalPages = Math.floor(totalHits / perPage);\n            if (page > totalPages) {\n            showEndPictures();\n            loadMore.style.display = \"none\";\n           } else {\n            renderImages(images, arrayImg.hits);\n            simpleRefresh();\n            const cart = document.querySelector('.list li')\n\n            let cartSize = cart.getBoundingClientRect();\n            window.scrollBy({\n                top: 2.25 * cartSize.height,\n                behavior: \"smooth\",\n              });\n              \n           }\n        })\n        .catch(() => {\n            showErrorMessage();\n        })\n        .finally(() => {\n            hideLoad();\n        })\n})"],"names":["KEY","URL","fetchImages","query","page","perPage","axios","Error$1","showErrorMessage","iziToast","Error","showEndPictures","showNoneText","renderImages","images","arrayImg","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","form","loader","loadMore","value","current_query","showLoad","hideLoad","simpleRefresh","SimpleLightbox","event","totalHits","totalPages","cartSize"],"mappings":"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"}