{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/img/error.svg","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\n\nconst KEY = \"42651969-17d73580612059adec8ce0b1d\";\nconst URL = \"https://pixabay.com/api/\";\n\nexport async function fetchImages(query, page, perPage) {\n        const response = await axios.get(`${URL}?key=${KEY}&q=${query}&page=${page}&per_page=${perPage}`);\n        return await response.data;\n\n}\n","export default \"__VITE_ASSET__8479b7dd__\"","import iziToast from \"izitoast\";\nimport Error from \"../img/error.svg\";\n\nexport function showErrorMessage() {\n    iziToast.show({\n        message: \"Sorry, there are no images matching your search query. Please, try again!\",\n        maxWidth: \"340px\",\n        iconUrl: Error,\n        backgroundColor: \"#ef4040\",\n        theme: \"dark\",\n        color: \"#fafafb\",\n        timeout: 3000,\n        position: \"topRight\"\n    });\n}\n\nexport function showEndPictures() {\n    iziToast.show({\n        message: \"We're sorry, but you've reached the end of search results.\",\n        maxWidth: \"340px\",\n        iconUrl: Error,\n        backgroundColor: \"#ef4040\",\n        theme: \"dark\",\n        color: \"#fafafb\",\n        timeout: 3000,\n        position: \"topRight\"\n    });\n}\n\n\nexport function showNoneText() {\n    iziToast.show({\n        message: \"Sorry, you have an empty string\",\n        maxWidth: \"340px\",\n        iconUrl: Error,\n        backgroundColor: \"#ef4040\",\n        theme: \"dark\",\n        color: \"#fafafb\",\n        timeout: 3000,\n        position: \"topRight\"\n    });\n}\n\n\nexport function renderImages(images, arrayImg) {\n    const markup = arrayImg.map(\n            ({webformatURL, largeImageURL, tags, likes, views, comments, downloads}) => {\n        return `<li class=\"li-im\">\n            <a href=\"${largeImageURL}\">\n                <img class=\"image\" src=\"${webformatURL}\" alt=\"${tags}\">\n            </a>\n            <ul class=\"info\">\n                <li class=\"descr\">\n                    <h2 class=\"descr-h\">Likes</h2>\n                    <p class=\"descr-p\">${likes}</p>\n                </li>\n                <li class=\"descr\">\n                    <h2 class=\"descr-h\">Views</h2>\n                    <p class=\"descr-p\">${views}</p>\n                </li>\n                <li class=\"descr\">\n                    <h2 class=\"descr-h\">Comments</h2>\n                    <p class=\"descr-p\">${comments}</p>\n                </li>\n                <li class=\"descr\">\n                    <h2 class=\"descr-h\">Downloads</h2>\n                    <p class=\"descr-p\">${downloads}</p>\n                </li>\n            </ul>\n        </li>`;\n    }).join(\"\");\n\n    images.insertAdjacentHTML(\"beforeend\", markup);\n}\n","import { fetchImages } from \"./js/pixabay-api.js\";\nimport { showErrorMessage, showEndPictures, showNoneText, renderImages } from \"./js/render-functions.js\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst form = document.querySelector(\"form\");\nconst images = document.querySelector(\".list\");\n\n\nconst loader = document.querySelector(\".loader\");\nconst loadMore = document.querySelector(\".load-more\")\n\nconst value = document.querySelector(\"#value\");\n\nlet page;\nlet current_query;\n\nconst perPage = 15;\n\nconst simpleRefresh = new SimpleLightbox('.list li a', {\n    captionDelay: 300,\n    captions: true,\n    captionsData: \"alt\",\n    captionClass: \"color-style\",\n});\n\n\nfunction showLoad() {\n    loader.style.display = \"block\";\n}\n\nfunction hideLoad() {\n    loader.style.display = \"none\";\n}\n\nfunction scrollToPage() {\n    const cart = document.querySelector('.list li')\n\n    let cartSize = cart.getBoundingClientRect();\n    window.scrollBy({\n        top: 2.25 * cartSize.height,\n        behavior: \"smooth\",\n      });\n}\n\nfunction endPictures() {\n    showEndPictures();\n    loadMore.style.display = \"none\";\n}\n\nfunction checkPages(totalHits) {\n    const totalPages = perPage * page\n    if (totalPages >= totalHits) {\n    endPictures();\n    } else {\n    scrollToPage()\n    }\n}\n\nform.addEventListener(\"submit\", function(event) {\n    event.preventDefault();\n    showLoad();\n\n    images.innerHTML = \"\";\n    loadMore.style.display = \"none\";\n    \n    const query = value.value.trim();\n\n    if (!query) {\n        showNoneText();\n        hideLoad();\n        return;\n    }\n\n    page = 1;               \n\n    fetchImages(query, page, perPage)\n        .then(arrayImg => {\n            if (arrayImg.hits.length === 0) {\n                throw new Error(\"No images found\");\n            } else {\n                renderImages(images, arrayImg.hits);\n                simpleRefresh.refresh()\n                if (arrayImg.totalHits > 15) {\n                    loadMore.style.display = \"block\";\n                }\n            }\n        })\n        .catch(() => {\n            showErrorMessage();\n        })\n        .finally(() => {\n            hideLoad();\n        });\n\n        current_query = query;\n        form.reset();\n});\n\n\nloadMore.addEventListener(\"click\", (event) => {\n    event.preventDefault();\n    showLoad();\n    page++;\n    fetchImages(current_query, page, perPage)\n        .then(arrayImg => {\n            renderImages(images, arrayImg.hits);\n            simpleRefresh.refresh()\n            const totalHits = arrayImg.totalHits\n            checkPages(totalHits);\n        })\n        .catch(() => {\n            showErrorMessage();\n        })\n        .finally(() => {\n            hideLoad();\n        })\n})"],"names":["KEY","URL","fetchImages","query","page","perPage","axios","Error$1","showErrorMessage","iziToast","Error","showEndPictures","showNoneText","renderImages","images","arrayImg","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","form","loader","loadMore","value","current_query","simpleRefresh","SimpleLightbox","showLoad","hideLoad","scrollToPage","cartSize","endPictures","checkPages","totalHits","event"],"mappings":"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"}